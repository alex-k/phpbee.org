{extends file="admin_page.html"}
{block name="main"}
		{if isset($_gsdata.gspgid_va[0]) && $_gsdata.gspgid_va[0]=='root'}
			{assign var="pid" value=$_gsdata.gspgid_va[1]}
			{controller _class="tw_articles" id=$pid _assign="root"}
			{assign var="root" value=$root->first()->get_values()}
		{else}
			{assign var="pid" value=0}
			{assign var="root" value=null}
		{/if}

		<table class="tb">
		<thead>
		<tr><th colspan="4" class="path">
		{if $root}
			<a href="/admin/articles/root/0">Корень</a>&nbsp;&raquo;&nbsp;{include file="f_path.html" root=$root pid=$pid}
		{else}
		<a href="/admin/articles/root/0">Корень</a>
		{/if}
		</th></tr>
		<tr><th>#</th><th>Название</th><th>&nbsp;</th><th>&nbsp;</th></tr>
		</thead>
		{controller _class="tw_articles" pid_id=$pid _assign="list"}
		{foreach from=$list item="e"}
		<tr class="{cycle values="odd,even"}">
			<td>{$e.id}</td>
			<td><a href="/admin/articles/root/{$e.id}">{$e.name}</a></td>
			<td class="cnt"><a href="/admin/articles/root/{$pid}/{$e.id}#form"><img src="/i/admin/ico_edit.png" alt="Редактировать" title="Редактировать"></a></td>
			<td class="cnt"><a href="/admin/articles/root/{$pid}/delete/{$e.id}" onclick="return confirm('Вы точно хотите удалить запись ?');"><img src="/i/admin/ico_delete.png" alt="Удалить" title="Удалить"></a></td>
		</tr>
		{/foreach}
		</table>
		<h5>Редактирование/<a href="/admin/articles/root/{$pid}#form">добавление</a> новой записи:</h5>
		<hr><br>
		<a name="form"></a>
		{handler gspgid="admin/form/tw_articles/edit/`$_gsdata.gspgid_va.2|default:''`" pid_id=$pid}
{/block}
