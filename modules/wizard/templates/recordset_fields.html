{extends file="admin_page.html"}
{block name="main"}

	{controller _class=wz_recordsets _assign=recordset _assign_type=first id=$_gsdata.gspgid_va.0}


	<h3>
	<a href="/admin/wizard/module/{$recordset.Module->first()->id}">{$recordset.Module->first()->name}</a>
	=>
	<a href="/admin/wizard/recordsets/{$recordset.Module->first()->id}/{$recordset.id}">{$recordset.name}</a>

	 <a href="/admin/wizard/commit/{$recordset.Module->first()->id}">commit</a>
	</h3>


	<h4>fields</h4>
	<table class="tb">
	<thead>
	<tr><th>#</th>
	<th>name</th>
	<th>verbose_name</th>
	<th>multilang</th>
	<th>type</th>
	<th>widget</th>
	<th>default_value</th>
	<th>options</th>
	<th>required</th>
	<th></th>
	<th></th>
	<th></th>
	</thead>
	{foreach from=$recordset.Fields item="e"}
	<tr class="{cycle values='odd,even'}">
			<td>{$e.id}</td>
			<td>{$e.name}</td>
			<td>{$e.verbose_name}</td>
			<td>{$e.multilang}</td>
			<td>{$e.type}</td>
			<td>{$e.widget}</td>
			<td>{$e.default_value}</td>
			<td>{$e.options}</td>
			<td>{$e.required}</td>
			<td class="cnt"><a href="/admin/wizard/recordset_fields/{$e.Recordset_id}/fields/{$e.id}#form"><img src="/i/admin/ico_edit.png" alt="Редактировать" title="Редактировать"></a></td>
			<td class="cnt"><a href="/admin/wizard/recordset_fields/copy/{$e.id}"><img src="/i/admin/ico_copy.png"></a></td>
			<td class="cnt"><a href="/admin/wizard/recordset_fields/delete/{$e.id}" onclick="return confirm('Вы точно хотите удалить запись ?');"><img src="/i/admin/ico_delete.png" alt="Удалить" title="Удалить"></a></td>
	</tr>
	{/foreach}
	</table>
	<h5>Редактировать/<a href="/admin/wizard/recordset_fields/{$_gsdata.gspgid_va.0}/fields/0#form">создать</a>:</h5>
	{if $_gsdata.gspgid_va.1=='fields' && isset($_gsdata.gspgid_va.2)}
	<hr><br>
	<a name="form"></a>
	{handler gspgid="/admin/form/wz_recordset_fields/edit/`$_gsdata.gspgid_va.2`" Recordset_id=$recordset.id}
	{/if}


	<h4>links</h4>

	<table class="tb">
	<thead>
	<tr><th>#</th>
	<th>name</th>
	<th>type</th>
	<th>classname</th>
	<th>linkname</th>
	<th>verbose_name</th>
	<th>widget</th>
	<th>options</th>
	<th></th>
	<th></th>
	<th></th>
	</thead>
	{foreach from=$recordset.Links item="e"}
	<tr class="{cycle values='odd,even'}">
			<td>{$e.id}</td>
			<td>{$e.name}</td>
			<td>{$e.type}</td>
			<td>{$e.classname}</td>
			<td>{$e.linkname}</td>
			<td>{$e.verbose_name}</td>
			<td>{$e.widget}</td>
			<td>{$e.options}</td>
			<td class="cnt"><a href="/admin/wizard/recordset_fields/{$e.Recordset_id}/links/{$e.id}#form"><img src="/i/admin/ico_edit.png" alt="Редактировать" title="Редактировать"></a></td>
			<td class="cnt"><a href="/admin/wizard/recordset_links/copy/{$e.id}"><img src="/i/admin/ico_copy.png"></a></td>
			<td class="cnt"><a href="/admin/wizard/recordset_links/delete/{$e.id}" onclick="return confirm('Вы точно хотите удалить запись ?');"><img src="/i/admin/ico_delete.png" alt="Удалить" title="Удалить"></a></td>
	</tr>
	{/foreach}
	</table>
	<h5>Редактировать/<a href="/admin/wizard/recordset_fields/{$_gsdata.gspgid_va.0}/links#form">создать</a>:</h5>
	{if $_gsdata.gspgid_va.1=='links'}
	<hr><br>
	<a name="form"></a>
	{handler gspgid="/admin/form/wz_recordset_links/edit/`$_gsdata.gspgid_va.2`" Recordset_id=$recordset.id}
	{/if}

	<h4>submodules</h4>

	<table class="tb">
	<thead>
	<tr><th>#</th>
	<th>name</th>
	<th></th>
	<th></th>
	</thead>
	{foreach from=$recordset.Submodules item="e"}
	<tr class="{cycle values='odd,even'}">
			<td>{$e.id}</td>
			<td>{$e.name}</td>
			<td class="cnt"><a href="/admin/wizard/recordset_fields/{$e.Recordset_id}/submodules/{$e.id}#form"><img src="/i/admin/ico_edit.png" alt="Редактировать" title="Редактировать"></a></td>
			<td class="cnt"><a href="/admin/wizard/recordset_submodules/delete/{$e.id}" onclick="return confirm('Вы точно хотите удалить запись ?');"><img src="/i/admin/ico_delete.png" alt="Удалить" title="Удалить"></a></td>
	</tr>
	{/foreach}
	</table>
	<h5>Редактировать/<a href="/admin/wizard/recordset_fields/{$_gsdata.gspgid_va.0}/submodules#form">создать</a>:</h5>
	{if $_gsdata.gspgid_va.1=='submodules'}
	<hr><br>
	<a name="form"></a>
	{handler gspgid="/admin/form/wz_recordset_submodules/edit/`$_gsdata.gspgid_va.2`" Recordset_id=$recordset.id}
	{/if}
{/block}
