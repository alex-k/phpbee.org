{assign var="year" value=$smarty.now|date_format:"%Y"}
{assign var="year" value=$_gsdata.gspgid_va.0|default:$year}
{assign var="month" value=$smarty.now|date_format:"%m"}
{assign var="month" value=$_gsdata.gspgid_va.1|default:$month}
{assign var="mnames" value=" "|explode:"Январь Февраль Март Апрель Май Июнь Июль Август Сентябрь Октябрь Ноябрь Декабрь"}
{controller _class="tw_news_stats" year=$year _assign="news_counts" _index_field_name="month" _fields="month,num"}
{assign var="news_counts" value=$news_counts->get_values()}
<div class="date_pager">
	<ul class="months">
		{assign var="last_month" value=1}
		{foreach from=$mnames key="key" item="name"}
		<li>
		{if isset($news_counts[$key+1]) && $news_counts[$key+1].num>0}<a href="/news/{$year}/{$key+1|str_pad:2:'0':0}" {if $key+1==$month}class="current"{/if}>{$name}</a>{else}{$name}{/if}
		</li>
		{/foreach}
	</ul>
</div>
<div class="clear"></div>